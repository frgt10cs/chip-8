import init from '../../pkg/chip8.js';
import { Terminal } from './terminal.js';
import { Emulator } from './emulator.js';
import { ChipGame } from './chipGame.js';

await init();

const canvas = document.getElementById('terminal');

const terminal = new Terminal(canvas, "rgb(30, 109, 47)", 20);
terminal.clear();

let games = [
  new ChipGame("Test OpCode",
    "Ek7qrKrqzqqqruCgoODAQEDg4CDA4OBgIOCg4CAgYEAgQOCA4ODgICAg4OCg4ODgIOBAoOCg4MCA4OCAwICgQKCgogLatADuogLatBPcaAFpBWoKawFlKmYrohbYtKI+2bSiAjYrogbatGsGohrYtKI+2bSiBkUqogLatGsLoh7YtKI+2bSiBlVgogLatGsQoibYtKI+2bSiBnb/RiqiAtq0axWiLti0oj7ZtKIGlWCiAtq0axqiMti0oj7ZtCJCaBdpG2ogawGiCti0ojbZtKIC2rRrBqIq2LSiCtm0ogaHUEcqogLatGsLoirYtKIO2bSiBmcqh7FHK6IC2rRrEKIq2LSiEtm0ogZmeGcfh2JHGKIC2rRrFaIq2LSiFtm0ogZmeGcfh2NHZ6IC2rRrGqIq2LSiGtm0ogZmjGeMh2RHGKIC2rRoLGkwajRrAaIq2LSiHtm0ogZmjGd4h2VH7KIC2rRrBqIq2LSiItm0ogZm4IZuRsCiAtq0awuiKti0ojbZtKIGZg+GZkYHogLatGsQojrYtKIe2bSj6GAAYTDxVaPp8GWiBkAwogLatGsVojrYtKIW2bSj6GaJ9jPyZaICMAGiBjEDogYyB6IG2rRrGqIO2LSiPtm0EkgT3A==",
    20),
  new ChipGame("Soccer",
    "AOBqDGsMaABpAGYAZwBlAGQAo0gjIiM0Iz5gYPAV8AdAABImEh5kAmYCZxAjCCLUIwgjDEZAElxG/hKAIwhPASLkYAHgoSKkYATgoSKwYAzgoSK8YA3goSLIEjAjIngBSApoACMiYBTwGGYCZxBkAiLUIwhgYPAV8AdAABIwEngjInkBSQppACMiYBTwGGY6ZxBk/iLUIwhgYPAV8AdAABIwEpxKAADuIzR6/iM0AO5KGgDuIzR6AiM0AO5LAADuIz57/iM+AO5LGgDuIz57AiM+AO7AA0AAZf9AAWUAQAJlAQDuRgAS9kYUEvZGKBL2RjwS9gDuItRgBPAYRP4TBGT+AO5kAgDu1nEA7oZEh1RHABMaRx8THgDuZQEA7mX/AO5hFWAA+CnRBXEU+SnRBaNIAO5hANGmcSjRpgDuYRTRtnEo0bYA7oCAgICAgA==",
    6),
  new ChipGame("UFO",
    "os1pOGoI2aOi0GsAbAPbw6LWZB1lH9RRZwBoDyKiIqxIABIiZB5lHKLT1FNuAGaAbQTtoWb/bQXtoWYAbQbtoWYBNoAi2KLQ28PNAYvU28M/ABKSos3Zo80BPQBt/3n+2aM/ABKMTgASLqLT1FNFABKGdf+EZNRTPwESRm0IjVJNCBKMEpIirHj/Eh4ioncFEpYioncPIqJtA/0YotPUUxKGovj3M2MAIrYA7qL4+DNjMiK2AO5tG/Jl8CnT1XMF8SnT1XMF8inT1QDuAXz+fGDwYEDgoPjUbgFtEP0YAO4=",
    20),
  new ChipGame("Airplane",
    "agBrBGwBbQBuAiMmIyBgMGEB8BXwB/EYMAASFCJCIyB9ASMgYAjgoSMKSgASPqNi2JF5AdiRTwES9EkYEuQishIeTAEibEwCInpMAyKITAQilkwFIqSjWdZyRAAA7qNX1FJCAADuo1vSMgDuZihnCWQAZQBiAGMAAO5mKGcOZChlFGIAYwAA7mYoZwdkKGUMYhZjEQDuZihnB2QoZQ5iFmMUAO5mKGcFZChlEGIWYwsA7qNZ1nJ2/tZyRAAA7qNX1FJ0AkREdMDUUkIAAO6jW9IycgJMBHICTAVyAkJEcsDSMgDufAFtAG4CAOBMBmwBagASCmAG8Bh7/0sAEwhtAG4CAOBqABIKEwhKAQDuYALwGGoBiNB4AYngeQHYkQDuo1Td4gDuZBljAKNW00FzCDNAEyxjHmQb/CnTRUsEo19LA6NgSwKjYUsBo2JjAXQC00EA7oD4/4DgEHCI7hF3qqiggAA=",
    20),
    new ChipGame("Space Inv.",
    "EiVTUEFDRSBJTlZBREVSUyAwLjkxIEJ5IERhdmlkIFdJTlRFUmAAYQBiCKPd0BhxCPIeMSASLXAIYQAwQBItaQVsFW4AI5FgCvAV8AcwABJLI5F+ARJFZgBoHGkAagRrCmwEbTxuDwDgI3UjUf0VYATgnhJ9I3U4AHj/I3VgBuCeEosjdTg5eAEjdTYAEp9gBeCeEulmAWUbhICj2dRRo9nUUXX/Nf8SrWYAEunUUT8BEunUUWYAg0BzA4O1YviDImIIMwASySN9ggZDCBLTMxAS1SN9ggYzGBLdI32CBkMgEuczKBLpI30+ABMHeQZJGGkAagRrCmwEffRuDwDgI1Ejdf0VEm/3BzcAEm/9FSNRi6Q7EhMbfAJq/DsCEyN8AmoEI1E8GBJvAOCk3WAUYQhiD9AfcAjyHjAsEzNg//AV8AcwABNB8AoA4KcG/mUSJaPB+R5hCCNpgQYjaYEGI2mBBiNpe9AA7oDggBIwANvGewwA7qPZYBzYBADuI1GOIyNRYAXwGPAV8AcwABOJAO5qAI3gawTpoRJXpgz9HvBlMP8Tr2oAawRtAW4BE5elCvAe28Z7CH0BegE6BxOXAO48fv//mZl+//8kJOd+/zw8ftuBQjx+/9sQOHz+AAB/AD8AfwAAAAEBAQMDAwMAAD8gICAgICAgID8ICP8AAP4A/AD+AAAAfkJCYmJiYgAA/wAAAAAAAAAA/wAA/wB9AEF9BX19AADCwsZEbCg4AAD/AAAAAAAAAAD/AAD/APcQFPf3BAQAAHxE/sLCwsIAAP8AAAAAAAAAAP8AAP8A7yAo6OgvLwAA+YXFxcXF+QAA/wAAAAAAAAAA/wAA/wC+ACAwIL6+AAD3BOeFhYT0AAD/AAAAAAAAAAD/AAD/AAB/AD8AfwAAAO8o7wDgYG8AAP8AAAAAAAAAAP8AAP8AAP4A/AD+AAAAwADAwMDAwAAA/AQEBAQEBAQE/BAQ//mBuYuamvoA+oqampuZ+OYlJfQ0NDQAFxQ0NzYmx99QUFzY2N8A3xEfEhsZ2XxE/oaGhvyE/oKC/v6AwMDA/vyCwsLC/P6A+MDA/v6A8MDAwP6AvoaG/oaG/oaGhhAQEBAQEBgYGEhIeJyQsMCwnICAwMDA/u6SkoaGhv6ChoaGhnyChoaGfP6C/sDAwHyCwsrEev6G/pCchP7A/gIC/v4QMDAwMIKCwsLC/oKCgu44EIaGlpKS7oJEODhEgoKC/jAwMP4CHvCA/gAAAAAGBgAAAGBgwAAAAAAAABgYGBgAGHzGDBgAGAAA/v4AAP6ChoaG/ggICBgYGP4C/sDA/v4CHgYG/oTExP4EBP6A/gYG/sDAwP6C/v4CAgYGBnxE/oaG/v6C/gYGBkT+RET+RKioqKioqKhsWgAMGKgwTn4AEhhmbKhaZlQkZgBISBgSqAaQqBIAfjASqIQwTnIYZqioqKioqJBUeKhIeGxyqBIYbHJmVJCocioYqDBOfgASGGZsqHJUqFpmGH4YTnKocioYMGaoME5+AGwwVE6cqKioqKioqEhUfhiokFR4ZqhsKjBaqIQwciqo2KgAThKo5KKoAE4SqGwqVFRyqIQwciqo3pyocioYqAxUSFp4chhmqGYYWlRmcmyocioAcqhyKhioME5+ABIYZmyoAGYYqDBODGYYAGwwTiSocioYMGaoHlRmDBicqCRUVBKoQngMPKiuqKioqKioqP8AAAAAAAAAAAAAAAAAAAA=",
    0),
    new ChipGame("Linar lander", 
    "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",
    20)
]

const emulator = new Emulator(terminal, games);
emulator.run();

document.onkeyup = function (e) {  
  emulator.onKeyUp(e.key);
}

document.onkeydown = function (e) {
  emulator.onKeyDown(e.key);
}